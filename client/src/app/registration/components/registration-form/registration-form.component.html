<mat-card class="top-space">
  <form [formGroup]="form">
    <mat-card-header>
      <mat-card-title>ERS Registration</mat-card-title>
      <mat-card-subtitle><button mat-icon-button color="accent" routerLink="/login"><mat-icon color="accent">perm_identity</mat-icon> Back to Sign In</button></mat-card-subtitle>
    </mat-card-header>
    <mat-card-content>
      <div class="column-stretch">
        <mat-form-field appearance="outline" color="accent">
          <mat-label>Username</mat-label>
          <input matInput type="text" formControlName="username" id="username" (blur)="checkUsername($event)" (focus)="handleFocus($event)">
          <small *ngIf="hasUsernameBeenChecked$ && lastCheckedUsername" [ngStyle]="{'color': (isUsernameAvailable$ ? '#27ff09' :'#ff0000')}">The username '{{ lastCheckedUsername }}' is {{ (isUsernameAvailable$) ? "" : "not" }} available!</small>
        </mat-form-field>
        <mat-progress-bar *ngIf="isCheckingUsername$" mode="indeterminate" color="primary"></mat-progress-bar>
        <mat-form-field appearance="outline" color="accent">
          <mat-label>Password</mat-label>
          <input matInput type="password" autocomplete="false" formControlName="password" id="password">
        </mat-form-field>
        <mat-form-field appearance="outline" color="accent">
          <mat-label>First Name</mat-label>
          <input matInput type="text" formControlName="firstname" id="firstname">
        </mat-form-field>
        <mat-form-field appearance="outline" color="accent">
          <mat-label>Last Name</mat-label>
          <input matInput type="text" formControlName="lastname" id="lastname">
        </mat-form-field>
        <div class="container-row">
          <mat-form-field appearance="outline" color="accent" class="form-row-item">
            <mat-label>Department</mat-label>
            <mat-select disableRipple required formControlName="department" id="department">
              <mat-option>--</mat-option>
              <mat-option *ngFor="let dept of getDepartments()" [value]="dept">{{ dept }}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field appearance="outline" color="accent" class="form-row-item">
            <mat-label>Position</mat-label>
            <input matInput type="text" formControlName="position" id="position">
          </mat-form-field>
        </div>
      </div>
    </mat-card-content>
    <mat-card-actions align="end" class="reg-form-actions">
      <small *ngIf="message" class="mat-typography" [ngStyle]="{'color': (message ? '#27ff09' :'#ff0000')}">{{ message.message }}</small>
      <button mat-raised-button color="accent" type="button" (click)="attemptRegistration()">Register</button>
    </mat-card-actions>
  </form>
</mat-card>
